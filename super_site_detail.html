<!doctype html>
<html lang="th">

<head>
  <meta charset="utf-8" />
  <title>รายละเอียดเวรวันนี้ — หัวหน้าชุด / สายตรวจ / ผู้จัดการโซน</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body {
      background: #f6f7f9;
    }

    .app-wrap {
      max-width: 1060px;
    }

    .card-soft {
      border: 0;
      border-radius: 18px;
    }

    .navbtn {
      min-height: 40px;
      padding: .35rem .75rem;
      border-radius: 12px;
      white-space: nowrap;
    }

    .touch-lg {
      min-height: 48px;
    }

    .subtle {
      color: #6c757d;
    }
  </style>
</head>

<body>
  <!-- Navbar (แก้โครงให้ถูก + ธีมเดียวกับ Super) -->
  <nav class="navbar navbar-dark bg-success">
    <div class="container-fluid d-flex align-items-center gap-2">

      <a id="navBrand" class="navbar-brand mb-0 fw-semibold" href="#">
        ระบบปฏิบัติงาน รปภ.
      </a>

      <span class="d-none d-md-inline small text-white-50">
        ระบบตรวจสอบเวร — หัวหน้าชุด / สายตรวจ / ผู้จัดการโซน
      </span>

      <div class="ms-auto d-flex align-items-center gap-2">
        <!-- ปุ่ม Back (JS จะเป็นคนคุม) -->
        <button id="btnBack" class="btn btn-outline-light btn-sm navbtn">
          ← กลับแดชบอร์ด
        </button>

        <button class="btn btn-outline-light btn-sm navbtn" onclick="logout()">
          ออกจากระบบ
        </button>
      </div>
    </div>
  </nav>

  <main class="container py-4">
    <div class="mx-auto app-wrap">

      <!-- Header -->
      <div class="mb-3">
        <h1 class="h4 mb-1 fw-semibold">รายละเอียดเวรวันนี้</h1>
        <div id="siteInfo" class="small subtle"></div>
      </div>

      <!-- Filters -->
      <div class="card shadow-sm card-soft mb-3">
        <div class="card-body p-4">
          <form id="filterForm" class="row g-3 align-items-end">
            <div class="col-12 col-md-4">
              <label for="dateInput" class="form-label fw-semibold mb-1">วันที่</label>
              <input type="date" id="dateInput" class="form-control touch-lg" />
              <div class="form-text">ดูวันนี้หรือย้อนหลังตามต้องการ</div>
            </div>

            <div class="col-12 col-md-5">
              <label for="siteInput" class="form-label fw-semibold mb-1">ไซต์</label>
              <!-- ใช้ id เดิม: siteInput -->
              <select id="siteInput" class="form-select touch-lg">
                <!-- options เติมโดย JS -->
              </select>
              <div class="form-text">รายการไซต์จะขึ้นตามสิทธิ์ของคุณ</div>
            </div>

            <div class="col-12 col-md-3">
              <!-- เผื่อช่อง label (ให้สูงเท่าคอลัมน์อื่น) -->
              <label class="form-label fw-semibold mb-1 invisible">_</label>

              <button type="submit" class="btn btn-success w-100 touch-lg px-4 fw-semibold">
                โหลดข้อมูล
              </button>

              <!-- เผื่อพื้นที่ form-text (นี่แหละตัวการ) -->
              <div class="form-text invisible">_</div>
            </div>

          </form>
        </div>
      </div>

      <!-- Helper text -->
      <div class="card shadow-sm card-soft mb-3">
        <div class="card-body py-3 px-4">
          <div class="small text-muted">
            ใช้ตรวจสอบการลงเวลาเข้า–ออก, GPS และหมายเหตุรายบุคคลของ รปภ. ในไซต์นี้
          </div>
        </div>
      </div>

      <!-- Results -->
      <div id="siteDetailContainer" class="mt-3"></div>

      <!-- No clock-in section -->
      <div id="noClockinSection" class="mt-4"></div>

    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/super_site_detail.js"></script>
</body>

</html>